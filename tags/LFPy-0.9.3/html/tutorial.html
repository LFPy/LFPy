
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LFPy Tutorial &mdash; LFPy 0.9.3 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="LFPy 0.9.3 documentation" href="index.html" />
    <link rel="next" title="Notes on LFPy" href="using.html" />
    <link rel="prev" title="Download LFPy" href="information.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29024998-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="using.html" title="Notes on LFPy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="information.html" title="Download LFPy"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">LFPy 0.9.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="lfpy-tutorial">
<h1>LFPy Tutorial<a class="headerlink" href="#lfpy-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will guide you through the first steps with LFPy. It is based on <tt class="docutils literal"><span class="pre">example1.py</span></tt> in the examples folder.</p>
<p>Let us start by importing LFPy, as well as numpy</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">LFPy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>Then we define a dictionary which describes the properties of the cell we want to simulate</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cell_parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;morphology&#39;</span> <span class="p">:</span> <span class="s">&#39;morphologies/L5_Mainen96_LFPy.hoc&#39;</span><span class="p">,</span>     <span class="c"># Mainen&amp;Sejnowski, Nature, 1996</span>
    <span class="s">&#39;tstartms&#39;</span> <span class="p">:</span> <span class="o">-</span><span class="mf">100.</span><span class="p">,</span>                 <span class="c"># start time of simulation, recorders start at t=0</span>
    <span class="s">&#39;tstopms&#39;</span> <span class="p">:</span> <span class="mf">200.</span><span class="p">,</span>                   <span class="c"># stop simulation at 200 ms.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The only mandatory entry is <tt class="docutils literal"><span class="pre">morphology</span></tt>, which should point to a <tt class="docutils literal"><span class="pre">hoc</span></tt> file specifying the neuron&#8217;s morphology. Here we also set the start and end times (in milliseconds). Much more options are available (such as specifying
passive parameters of the cell or adding custom NEURON mechanisms), but for now we leave them at default values.</p>
<p>The Cell object is created using</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cell</span> <span class="o">=</span> <span class="n">LFPy</span><span class="o">.</span><span class="n">Cell</span><span class="p">(</span><span class="o">**</span><span class="n">cell_parameters</span><span class="p">)</span>
</pre></div>
</div>
<p>Let us now add a synapse. Again, we define the synapse parameters first</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">synapse_parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;idx&#39;</span> <span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_closest_idx</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">800.</span><span class="p">),</span>
    <span class="s">&#39;e&#39;</span> <span class="p">:</span> <span class="mf">0.</span><span class="p">,</span>                   <span class="c"># reversal potential</span>
    <span class="s">&#39;syntype&#39;</span> <span class="p">:</span> <span class="s">&#39;ExpSyn&#39;</span><span class="p">,</span>       <span class="c"># synapse type</span>
    <span class="s">&#39;tau&#39;</span> <span class="p">:</span> <span class="mf">2.</span><span class="p">,</span>                 <span class="c"># syn. time constant</span>
    <span class="s">&#39;weight&#39;</span> <span class="p">:</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span>              <span class="c"># syn. weight</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and create a Synapse object connected to our cell</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">synapse</span> <span class="o">=</span> <span class="n">LFPy</span><span class="o">.</span><span class="n">Synapse</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="o">**</span><span class="n">synapse_parameters</span><span class="p">)</span>
</pre></div>
</div>
<p>Let us assume we want the synapse to be activated by a single spike at t = 50ms. We have to pass the spike time to the synapse using</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">synapse</span><span class="o">.</span><span class="n">set_spike_times</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">50.</span><span class="p">]))</span>
</pre></div>
</div>
<p>We now have a cell with a synapse, and we can run the simulation</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cell</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">rec_imem</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note the <tt class="docutils literal"><span class="pre">rec_imem=True</span></tt> argument, this means that the transmembrane currents will be saved - we need the currents to calculate the extracellular potential.</p>
<p>The final element is the extracellular recording electrode. Again, we start by defining the parameters</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">electrode_parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;sigma&#39;</span> <span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>   <span class="c"># extracellular conductivity</span>
    <span class="s">&#39;x&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
    <span class="s">&#39;y&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
    <span class="s">&#39;z&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">50</span><span class="p">])</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here we define a single electrode contact at x = 0, y = 0, z = 50 microns, but a whole array of electrodes can be specified by passing array arguments.</p>
<p>The electrode (recording from <tt class="docutils literal"><span class="pre">cell</span></tt>) is created using</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">electrode</span> <span class="o">=</span> <span class="n">LFPy</span><span class="o">.</span><span class="n">RecExtElectrode</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="o">**</span><span class="n">electrode_parameters</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, we calculate the extracellular potential at the specified electrode location</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">electrode</span><span class="o">.</span><span class="n">calc_lfp</span><span class="p">()</span>
</pre></div>
</div>
<p>The resulting LFP is stored in <tt class="docutils literal"><span class="pre">electrode.LFP</span></tt>.</p>
<div class="section" id="more-examples">
<h2>More examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h2>
<p>More examples of LFPy usage are provided in the &#8220;trunk/examples&#8221; folder in the
source code release, displaying different usage scenarios;</p>
<ul class="simple">
<li><a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples/example1.py">example1.py</a></li>
<li><a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples/example2.py">example2.py</a></li>
<li><a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples/example3.py">example3.py</a></li>
<li><a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples/example4.py">example4.py</a></li>
<li><a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples/example_mpi.py">example_mpi.py</a></li>
</ul>
<p>The examples rely on files present inside the <a class="reference external" href="http://bebiservice.umb.no/projects-public/LFPy-release/browser/trunk/examples">examples folder</a>,
such as morphology files and .mod files.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">LFPy Tutorial</a><ul>
<li><a class="reference internal" href="#more-examples">More examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="information.html"
                        title="previous chapter">Download LFPy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="using.html"
                        title="next chapter">Notes on LFPy</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="using.html" title="Notes on LFPy"
             >next</a> |</li>
        <li class="right" >
          <a href="information.html" title="Download LFPy"
             >previous</a> |</li>
        <li><a href="index.html">LFPy 0.9.3 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2012, Computational Neuroscience Group, UMB.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<!--<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.-->
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>